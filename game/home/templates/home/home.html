<!-- Author: Will Cooke -->

{% extends 'base.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'home/css/home-styles.css' %}">
  <!-- Custom leaderboard CSS -->
  <link rel="stylesheet" href="{% static 'home/css/leaderboard.css' %}">
{% endblock %}

{% block content %}
<h1>Exeter University - Sustainability</h1>

<div class="content-wrapper">
  <div id="loggedIn">
    <div class="top-content">
      <p>Welcome back, {{ user.name }}!</p>
      <p>Keep completing challenges and earning rewards to help Exeter University reach net zero.</p>
    </div>

    <div class="main-content row">
      <div class="left-content col-md-8">
        <div class="active-challenges">
          <h2>Suggested Challenges for You</h2>
          <ul>
            <li>‚ôªÔ∏è <strong>Recycle & Win!</strong> ‚Äì Scan the QR code after recycling plastic.</li>
            <li>üö∂ <strong>Transport</strong> ‚Äì Log how you travelled to campus.</li>
            <li>üå≥ <strong>Increase your knowledge!</strong> ‚Äì Complete a quiz on an article.</li>
          </ul>
          <a href="/challenges" class="btn btn-primary">See All Challenges</a>
        </div>
      </div>

      <div class="right-content col-md-4">
        <div class="leaderboard">
          <h4>Leaderboard</h4>
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">Name</th>
                <th scope="col">Points</th>
                <th scope="col">Progress</th>
              </tr>
            </thead>
            <tbody>
              {% for leader in leaderboard %}
              <tr>
                <td>{{ leader.name }}</td>
                <td>{{ leader.points }}</td>
                <td>
                  <div class="progress">
                    <div class="progress-bar" role="progressbar" style="width: {{ leader.progress }}%;" aria-valuenow="{{ leader.progress }}" aria-valuemin="0" aria-valuemax="100">
                      {{ leader.progress }}%
                    </div>
                  </div>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="3">No leaderboard data available.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div id="loggedOut">
    <p>Please <a href="/login">sign in</a> or <a href="/signup">create an account</a> to participate.</p>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'home/js/home.js' %}"></script>
{% endblock %}
