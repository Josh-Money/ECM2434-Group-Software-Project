{% extends 'base.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'home/css/home-styles.css' %}">
<link rel="stylesheet" href="{% static 'home/css/leaderboard.css' %}">
{% endblock %}

{% block content %}
<div class="container my-4">
  <h1 class="mb-4">Exeter University - Sustainability</h1>

  <!-- User Welcome Section -->
  <div class="user-welcome mb-4">
    {% if user.is_authenticated %}
      <p>Welcome back, {{ user_info.name }}!</p>
      <p>You have {{ user_info.points }} points.</p>
    {% else %}
      <p>Welcome, Guest! Please <a href="/login/">sign in</a> to access more features.</p>
    {% endif %}
  </div>

  <div class="row">
    <!-- Left Column: Active Challenges -->
    <div class="left-content col-md-8">
      <div class="active-challenges mb-4">
        <h2>Suggested Challenges for You</h2>
        <ul class="list-group">
          <li class="list-group-item">‚ôªÔ∏è <strong>Recycle & Win!</strong> ‚Äì Scan the QR code after recycling plastic.</li>
          <li class="list-group-item">üö∂ <strong>Transport</strong> ‚Äì Log how you travelled to campus.</li>
          <li class="list-group-item">üå≥ <strong>Increase your knowledge!</strong> ‚Äì Complete a quiz on an article.</li>
        </ul>
        <a href="/challenges" class="btn btn-primary mt-3">See All Challenges</a>
      </div>
    </div>

    <!-- Right Column: Leaderboard -->
    <div class="right-content col-md-4">
      <div class="leaderboard p-3 shadow-sm rounded">
        <h4 class="text-center mb-3">Leaderboard</h4>
        <ul class="list-group">
          {% for entry in leaderboard %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              {{ entry.name }}
              <span class="badge badge-primary badge-pill">{{ entry.points }}</span>
            </li>
          {% empty %}
            <li class="list-group-item">No leaderboard data available.</li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'home/js/home.js' %}"></script>
{% endblock %}
