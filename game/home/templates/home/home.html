<!-- Author: Will Cooke -->

{% extends 'base.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'home/css/home-styles.css' %}">
<link rel="stylesheet" href="{% static 'home/css/leaderboard.css' %}">
{% endblock %}

{% block content %}
<h1>Exeter University - Sustainability</h1>

<div class="content-wrapper">
    <div id="loggedIn">
        <div class="top-content">
            <p>Welcome back, {{ user.name }}!</p>
            <p>Keep completing challenges and earning rewards to help Exeter University reach net zero.</p>
        </div>

        <div class="main-content">
            <div class="left-content">
                <div class="active-challenges">
                    <h2>Suggested Challenges for You</h2>
                    <ul>
                        <li>‚ôªÔ∏è <strong>Recycle & Win!</strong> ‚Äì Scan the QR code after recycling plastic.</li>
                        <li>üö∂ <strong>Transport</strong> ‚Äì Log how you travelled to campus.</li>
                        <li>üå≥ <strong>Increase your knowledge!</strong> ‚Äì Complete a quiz on an article.</li>
                    </ul>
                    <a href="/challenges" class="btn">See All Challenges</a>
                </div>
            </div>

            <div class="col-md-4">
                <div class="leaderboard-container">
                  <h4 class="text-center">Leaderboard</h4>
                  <div class="leaderboard-header row">
                    <div class="col-4 text-center header-name">NAME</div>
                    <div class="col-3 text-center header-points">POINTS</div>
                    <div class="col-5 text-center header-progress">PROGRESS</div>
                  </div>
                  {% for entry in leaderboard %}
                    <div class="leaderboard-row row align-items-center">
                      <div class="col-4 text-center">{{ entry.name }}</div>
                      <div class="col-3 text-center">{{ entry.points }}</div>
                      <div class="col-5">
                        <div class="progress" style="height: 20px;">
                          <div class="progress-bar progress-bar-striped progress-bar-animated"
                              role="progressbar"
                              style="width: {{ entry.progress }}%;"
                              aria-valuenow="{{ entry.progress }}"
                              aria-valuemin="0"
                              aria-valuemax="100">
                          </div>
                        </div>
                      </div>
                    </div>
                  {% empty %}
                    <p class="text-center">No leaderboard data available.</p>
                  {% endfor %}
                </div>
              </div>
        </div>
    </div>

    <div id="loggedOut">
        <p>Please <a href="">sign in</a> or <a href="">create an account</a> to participate.</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'home/js/home.js' %}"></script>
{% endblock %}