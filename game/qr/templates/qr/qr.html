{% extends 'base.html' %}
{% load static %}

{% block title %}Scan QR Code{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'qr/css/qr.css' %}">
{% endblock %}

{% block content %}
<h1 class="title">QR Codes</h1>
<a style="display: block; margin: 0 auto 20px auto;" href="/challenges" class="btn btn-primary w-25">Return to Challenges</a>
<div class="container mt-5">

    <p class="text center">Scan the QR code located near recycling bins across the University, or enter the code manually below.</p>

    <!-- Form for manual QR code entry -->
    <form method="post" action="">
        {% csrf_token %}
        <label for="qr_code">QR Code:</label>
        <input type="text" id="qr_code" name="qr_code" placeholder="Enter QR code value" required>
        <br>
        <br>
        <button type="submit" class="btn btn-primary" id="submit">Submit</button>
    </form>

    <!--Video element for QR Scanner -->
    <video id="preview"></video>

    <!-- Toast Message -->
    {% if messages %}
        {% for message in messages %}
            <div id="toast" class="toast {{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <!-- Include Instascan Library -->
    <script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'qr/js/qr.js' %}"></script>
{% endblock %}
